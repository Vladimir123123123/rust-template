using System;
using UnityEngine;

[Serializable]
public class BonePoseReference
{
	public Transform SourceTransform;

	public Quaternion RotationInRoot;

	public Vector3 PositionInRoot;

	public void SavePose(Transform transform, LegsAnimator animator)
	{
		if (!(animator == null) && !(transform == null))
		{
			SourceTransform = transform;
			PositionInRoot = animator.BaseTransform.InverseTransformPoint(transform.position);
			RotationInRoot = FEngineering.QToLocal(animator.BaseTransform.rotation, transform.rotation);
		}
	}

	public void RestorePose(LegsAnimator animator)
	{
		if (!(animator == null) && !(SourceTransform == null))
		{
			SourceTransform.position = animator.BaseTransform.TransformPoint(PositionInRoot);
			SourceTransform.rotation = FEngineering.QToWorld(animator.BaseTransform.rotation, RotationInRoot);
		}
	}
}
