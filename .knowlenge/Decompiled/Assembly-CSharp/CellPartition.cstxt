using System.Collections.Generic;
using Facepunch;

private class CellPartition : Pool.IPooled
{
	public List<CellId> PackedCells;

	public List<CellId> CellsWithSpace;

	public bool IsEmpty()
	{
		if (CollectionEx.IsNullOrEmpty(PackedCells))
		{
			return CollectionEx.IsNullOrEmpty(CellsWithSpace);
		}
		return false;
	}

	public void AddPackedCell(CellId cell)
	{
		if (PackedCells == null)
		{
			PackedCells = Pool.Get<List<CellId>>();
		}
		PackedCells.Add(cell);
	}

	public void RemovePackedCell(CellId cell)
	{
		if (PackedCells != null)
		{
			PackedCells.Remove(cell);
			if (PackedCells.Count == 0)
			{
				Pool.FreeUnmanaged(ref PackedCells);
			}
		}
	}

	public void AddCellWithSpace(CellId cell)
	{
		if (CellsWithSpace == null)
		{
			CellsWithSpace = Pool.Get<List<CellId>>();
		}
		CellsWithSpace.Add(cell);
	}

	public void RemoveCellWithSpace(CellId cell)
	{
		if (CellsWithSpace != null)
		{
			CellsWithSpace.Remove(cell);
			if (CellsWithSpace.Count == 0)
			{
				Pool.FreeUnmanaged(ref CellsWithSpace);
			}
		}
	}

	public void EnterPool()
	{
		if (PackedCells != null)
		{
			Pool.FreeUnmanaged(ref PackedCells);
		}
		if (CellsWithSpace != null)
		{
			Pool.FreeUnmanaged(ref CellsWithSpace);
		}
	}

	public void LeavePool()
	{
	}
}
