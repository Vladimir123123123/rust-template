using FIMSpace.FProceduralAnimation;
using UnityEngine;

[CreateAssetMenu(fileName = "LAM_RedirectRaycasting", menuName = "FImpossible Creations/Legs Animator/Control Module - Redirect Raycasting", order = 1)]
public class LAM_RedirectRaycasting : LegsAnimatorControlModuleBase
{
	private LegsAnimator.Variable _LocalDirection;

	public override void OnInit(LegsAnimator.LegsAnimatorCustomModuleHelper helper)
	{
		base.OnInit(helper);
		_LocalDirection = helper.RequestVariable("Rotate Raycast", new Vector3(75f, 0f, 0f));
	}

	public override void OnUpdate(LegsAnimator.LegsAnimatorCustomModuleHelper helper)
	{
		Quaternion quaternion = Quaternion.Euler(_LocalDirection.GetVector3());
		Matrix4x4 mx = Matrix4x4.TRS(base.LA.BaseTransform.position, quaternion * base.LA.BaseTransform.rotation, base.LA.BaseTransform.lossyScale);
		base.LA.User_OverwriteCastMatrix(mx);
	}
}
