public class Support
{
	public StabilityEntity parent;

	public EntityLink link;

	public float factor = 1f;

	public Support(StabilityEntity parent, EntityLink link, float factor)
	{
		this.parent = parent;
		this.link = link;
		this.factor = factor;
	}

	public StabilityEntity SupportEntity(StabilityEntity ignoreEntity = null)
	{
		StabilityEntity stabilityEntity = null;
		for (int i = 0; i < link.connections.Count; i++)
		{
			StabilityEntity stabilityEntity2 = link.connections[i].owner as StabilityEntity;
			Socket_Base socket = link.connections[i].socket;
			if (!(stabilityEntity2 == null) && !(stabilityEntity2 == parent) && !(stabilityEntity2 == ignoreEntity) && !stabilityEntity2.isClient && !stabilityEntity2.IsDestroyed && !(socket is ConstructionSocket { femaleNoStability: not false }) && (stabilityEntity == null || stabilityEntity2.cachedDistanceFromGround < stabilityEntity.cachedDistanceFromGround))
			{
				stabilityEntity = stabilityEntity2;
			}
		}
		return stabilityEntity;
	}
}
