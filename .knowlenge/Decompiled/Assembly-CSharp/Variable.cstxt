using System;
using UnityEngine;

[Serializable]
public class Variable
{
	public enum EVariableType
	{
		Number,
		Bool,
		Vector2,
		Vector3,
		String,
		Curve,
		UnityObject,
		CustomObject
	}

	public string VariableName = "Variable";

	[SerializeField]
	private string Tooltip = "";

	private bool _tooltipWasSet;

	[SerializeField]
	private Vector4 _value = Vector4.zero;

	[SerializeField]
	private string _string = "";

	[SerializeField]
	private AnimationCurve _curve;

	[SerializeField]
	private UnityEngine.Object _uObject;

	[SerializeField]
	private object _object;

	[NonSerialized]
	private int nameHash;

	public EVariableType VariableType;

	[SerializeField]
	private Vector4 _rangeHelper = Vector4.zero;

	public bool TooltipAssigned => _tooltipWasSet;

	public int GetNameHash
	{
		get
		{
			if (nameHash == 0)
			{
				nameHash = VariableName.GetHashCode();
			}
			return nameHash;
		}
	}

	public void AssignTooltip(string tooltip)
	{
		if (!_tooltipWasSet)
		{
			Tooltip = tooltip;
			_tooltipWasSet = true;
		}
	}

	public Variable(string name, object value)
	{
		VariableName = name;
		SetValue(value);
	}

	public void SetValue(object o)
	{
		if (o is int)
		{
			_value = new Vector4((int)o, 0f, 0f, 1f);
			VariableType = EVariableType.Number;
		}
		else if (o is float)
		{
			_value = new Vector4((float)o, 0f, 0f, 0f);
			VariableType = EVariableType.Number;
		}
		else if (o is bool)
		{
			if ((bool)o)
			{
				_value.x = 1f;
			}
			else
			{
				_value.x = 0f;
			}
			VariableType = EVariableType.Bool;
		}
		else if (o is Vector2 vector)
		{
			_value = vector;
			VariableType = EVariableType.Vector2;
		}
		else if (o is Vector3 vector2)
		{
			_value = vector2;
			VariableType = EVariableType.Vector3;
		}
		else if (o is string)
		{
			_string = o as string;
			VariableType = EVariableType.String;
		}
		else if (o is AnimationCurve)
		{
			_curve = o as AnimationCurve;
			VariableType = EVariableType.Curve;
		}
		else if (o is UnityEngine.Object)
		{
			_uObject = o as UnityEngine.Object;
			VariableType = EVariableType.UnityObject;
		}
		else
		{
			_object = o;
			VariableType = EVariableType.CustomObject;
		}
	}

	public int GetInt()
	{
		return (int)_value.x;
	}

	public float GetFloat()
	{
		return _value.x;
	}

	public bool GetBool()
	{
		return _value.x == 1f;
	}

	public Vector2 GetVector2()
	{
		return new Vector2(_value.x, _value.y);
	}

	public Vector3 GetVector3()
	{
		return new Vector3(_value.x, _value.y, _value.z);
	}

	public string GetString()
	{
		return _string;
	}

	public AnimationCurve GetCurve()
	{
		return _curve;
	}

	public UnityEngine.Object GetUnityObject()
	{
		return _uObject;
	}

	public object GetObject()
	{
		return _object;
	}

	public void SetMinMaxSlider(float min, float max)
	{
		_rangeHelper = new Vector4(min, max, 0f, 0f);
	}

	public void SetCurveFixedRange(float startTime, float startValue, float endTime, float endValue)
	{
		_rangeHelper = new Vector4(startTime, startValue, endTime, endValue);
	}

	public bool Editor_DisplayVariableGUI()
	{
		return false;
	}
}
