using System;
using System.Collections.Generic;
using System.Linq;
using Rust.Platform.Steam;
using Steamworks;

public class SteamInventory : IPlayerInventory, IDisposable
{
	public InventoryResult Value { get; }

	public IReadOnlyList<IPlayerItem> Items { get; }

	internal SteamInventory(InventoryResult inventory)
	{
		Value = inventory;
		InventoryItem[] items = Value.GetItems(includeProperties: true);
		if (items == null)
		{
			Items = new List<IPlayerItem>(0);
			return;
		}
		Items = items.Select((InventoryItem i) => new SteamItem(i)).ToList();
	}

	public void Dispose()
	{
		Value.Dispose();
	}

	public bool BelongsTo(ulong userId)
	{
		return Value.BelongsTo(userId);
	}

	public byte[] Serialize()
	{
		return Value.Serialize();
	}
}
